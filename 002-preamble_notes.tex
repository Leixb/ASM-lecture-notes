\usepackage{tcolorbox}
\tcbuselibrary{most}

% \theoremstyle{plain}% from `amsthm'
% \newtheorem{lemma}{Lemma}% from `amsthm'
% \newtheorem{prop}{Proposition}% from `amsthm'

\theoremstyle{definition}% from `amsthm'
\newtheorem{defn}{Definition}% from `amsthm'

\theoremstyle{remark}% from `amsthm'
\newtheorem*{rem}{Remark}% from `amsthm'
\newtheorem{ex}{Example}% from `amsthm'
\newtheorem{prob}{Problem}% from `amsthm'
\newtheorem{ques}{Question}% from `amsthm'
% \newtheorem*{note}{Note}% from `amsthm'
\newtheorem*{hint}{Hint}% from `amsthm'

\tcbset{%
	theo/.style={%
			enhanced,
            parbox=false,
			skin=bicolor,
			colbacklower=#1!2,
			sharp corners,
			toprule=0pt, rightrule=0pt, bottomrule=0pt, leftrule=1mm,
			colback=#1!5,colframe=#1!80!black,coltitle=#1!80!black,
			fonttitle=\bfseries,
			detach title, before upper={\tcbtitle\quad},
			subtitle style={
					fontupper=\bfseries,toprule=0pt,bottomrule=0pt,colback={#1!10},
				},
			code={\renewcommand\emph[1]{\textcolor{tcbcoltitle}{\textbf{##1}}}},
		},
	marker/.style={%
			enhanced,
            parbox=false,
			before skip balanced=2mm,after skip balanced=3mm,
			boxrule=0.4pt,left=5mm,right=2mm,top=1mm,bottom=1mm,
			colback=#1!50,
			colframe=#1!20!black,
			coltitle=black,
			sharp corners,rounded corners=southeast,arc is angular,arc=3mm,
			underlay={%
					\path[fill=tcbcolback!80!black] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
					\path[draw=tcbcolframe,shorten <=-0.05mm,shorten >=-0.05mm] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
					\path[fill=#1!50!black,draw=none] (interior.south west) rectangle node[white]{\Huge\bfseries !} ([xshift=4mm]interior.north west);
				},
			% drop fuzzy shadow,
		},
}

\newtcbtheorem[number within=chapter]{definition}{Definition}%
{theo=blue}{def}

\newtcbtheorem[number within=chapter]{algorithm}{Algorithm}%
{theo=cyan,coltitle={cyan!60!black}}{alg}

\newtcbtheorem[number within=chapter]{theorem}{Theorem}%
{theo=purple}{th}

\newtcbtheorem[number within=chapter]{prop}{Proposition}%
{theo=red}{prop}

\newtcbtheorem[number within=chapter]{lemma}{Lemma}%
{theo=magenta}{lemma}

\newtcbtheorem[number within=chapter]{recap}{Recap}%
{theo=orange}{rec}

\newtcbtheorem[number within=chapter]{exercise}{Exercise}%
{theo=yellow,coltitle=black}{exer}

\newtcbtheorem[number within=chapter]{question}{Question}%
{theo={green!60!black}}{qu}

\newtcbtheorem[number within=chapter]{problem}{Problem}%
{theo=teal}{problem}

\newtcbtheorem[number within=chapter]{example}{Example}%
{theo=black,colback=white}{ex}

\newtcbtheorem[number within=chapter]{remark}{Remark}%
{theo=blue,colback=white}{ex}

\newtcolorbox{marker}[1][]{marker={yellow!50!white},#1}
\newtcolorbox{important}[1][]{marker=red,#1}
\newtcolorbox{cnote}[1][]{marker=orange,#1}
\newtcolorbox{note}[1][]{marker=white,#1}
