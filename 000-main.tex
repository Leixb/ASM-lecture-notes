%! TEX root = **/000-main.tex
% vim: spell spelllang=en:

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PREAMBLE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{001-preamble}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% EXTRA PACKAGES / CONFIG
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{fancyhdr}

% Set default figure size
\setkeys{Gin}{width=.9\textwidth, keepaspectratio}

% Center figures by default
\makeatletter
\g@addto@macro\@floatboxreset\centering
\makeatother

\usepackage{luacode}
\usepackage{ulem}
\usepackage{dsfont}
\usepackage{tikz}
% \usepackage{tikzexternal}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\pgfmathsetseed{42} % Set seed for random number generation
\usepgfplotslibrary{statistics}

\usetikzlibrary{arrows.meta}
\tikzset{>={Latex[width=3mm,length=3mm]}}

\tikzset{declare function = {
    binom(\k,\n,\p)=\n!/(\k!*(\n-\k)!)*\p^\k*(1-\p)^(\n-\k);
    normal(\x,\mu,\sigma)=\frac{1}{\sqrt{2*\pi*\sigma^2}}*\exp(-\frac{(\x-\mu)^2}{2*\sigma^2});
}}

\newcommand*\GnuplotDefs{
    % set number of samples
    set samples 101;
    %
    % define beta distribution function
    % (copied from <http://gnuplot.sourceforge.net/demo/prob.5.gnu>)
    Binv(p,q)=exp(lgamma(p+q)-lgamma(p)-lgamma(q));
    beta(x,p,q)=p<=0||q<=0?1/0:x<0||x>1?0.0:Binv(p,q)*x**(p-1.0)*(1.0-x)**(q-1.0);
    gammaPdf(x,a,b)=b**a*x**(a-1)*exp(-b*x)/gamma(a);
}

\newenvironment{nscenter}
 {\parskip=0pt\par\nopagebreak\centering}
 {\par\noindent\ignorespacesafterend}


\usetikzlibrary{shapes,arrows,positioning,calc}
\usetikzlibrary{
    pgfplots.dateplot,
}

\usepackage{cancel}
\usepackage{mathrsfs}

\DeclareMathOperator{\argmin}{argmin}
\DeclareMathOperator{\argmax}{argmax}

\usepackage{tcolorbox}
\tcbuselibrary{most}

% \theoremstyle{plain}% from `amsthm'
% \newtheorem{lemma}{Lemma}% from `amsthm'
% \newtheorem{prop}{Proposition}% from `amsthm'

\theoremstyle{definition}% from `amsthm'
\newtheorem{defn}{Definition}% from `amsthm'

\theoremstyle{remark}% from `amsthm'
\newtheorem*{rem}{Remark}% from `amsthm'
\newtheorem{ex}{Example}% from `amsthm'
\newtheorem{prob}{Problem}% from `amsthm'
\newtheorem{ques}{Question}% from `amsthm'
% \newtheorem*{note}{Note}% from `amsthm'
\newtheorem*{hint}{Hint}% from `amsthm'

% \newtcbtheorem[number within=section]{definition}{Definition}%
% {colback=orange!5,colframe=yellow!35!black,fonttitle=\bfseries,parbox=false}{def}

% \newtcbtheorem[number within=section]{theorem}{Theorem}%
% {colback=yellow!5,colframe=lime!35!black,fonttitle=\bfseries,parbox=false}{th}

% \newtcbtheorem[number within=section]{prop}{Proposition}%
% {colback=cyan!5,colframe=cyan!35!black,fonttitle=\bfseries}{prop}

% \newtcbtheorem[number within=section]{recap}{Recap}%
% {colback=red!5,colframe=red!55!black,fonttitle=\bfseries}{rec}

% \newtcbtheorem[number within=section]{exercise}{Exercise}%
% {colback=purple!5,colframe=purple!35!black,fonttitle=\bfseries}{ex}

% \newtcbtheorem[number within=section]{question}{Question}%
% {colback=purple!5,colframe=green!35!black,fonttitle=\bfseries}{qu}

% \newtcbtheorem[number within=section]{example}{Example}%
% {colback=white,colframe=white!35!black,fonttitle=\bfseries,parbox=false}{example}

% \newtcolorbox{marker}[1][]{enhanced,
%   before skip balanced=2mm,after skip balanced=3mm,
%   boxrule=0.4pt,left=5mm,right=2mm,top=1mm,bottom=1mm,
%   colback=yellow!50,
%   colframe=yellow!20!black,
%   sharp corners,rounded corners=southeast,arc is angular,arc=3mm,
%   underlay={%
%     \path[fill=tcbcolback!80!black] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
%     \path[draw=tcbcolframe,shorten <=-0.05mm,shorten >=-0.05mm] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
%     \path[fill=yellow!50!black,draw=none] (interior.south west) rectangle node[white]{\Huge\bfseries !} ([xshift=4mm]interior.north west);
%     },
%   drop fuzzy shadow,#1}

\tcbset{%
    theo/.style={%
        enhanced,
        skin=bicolor,
        colbacklower=#1!2,
        sharp corners,
        toprule=0pt, rightrule=0pt, bottomrule=0pt, leftrule=1mm,
        colback=#1!5, colframe=#1!80!black, coltitle=#1!80!black,
        fonttitle=\bfseries,
        detach title, before upper={\tcbtitle\par},
        subtitle style={fontupper=\bfseries,toprule=0pt,bottomrule=0pt,colback={#1!10}},
        parbox=false,
    },
    marker/.style={%
      enhanced,
      parbox=false,
      before skip balanced=2mm,after skip balanced=3mm,
      boxrule=0.4pt,left=5mm,right=2mm,top=1mm,bottom=1mm,
      colback=#1!50,
      colframe=#1!20!black,
      sharp corners,rounded corners=southeast,arc is angular,arc=3mm,
      underlay={%
        \path[fill=tcbcolback!80!black] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
        \path[draw=tcbcolframe,shorten <=-0.05mm,shorten >=-0.05mm] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
        \path[fill=#1!50!black,draw=none] (interior.south west) rectangle node[white]{\Huge\bfseries !} ([xshift=4mm]interior.north west);
        },
      % drop fuzzy shadow,
  },
}

\newtcbtheorem[number within=chapter]{definition}{Definition}%
{theo=blue}{def}

\newtcbtheorem[number within=chapter]{theorem}{Theorem}%
{theo=purple}{th}

\newtcbtheorem[number within=chapter]{prop}{Proposition}%
{theo=red}{prop}

\newtcbtheorem[number within=chapter]{lemma}{Lemma}%
{theo=magenta}{lemma}

\newtcbtheorem[number within=chapter]{recap}{Recap}%
{theo=orange}{rec}

\newtcbtheorem[number within=chapter]{exercise}{Exercise}%
{theo=yellow,coltitle=black}{exer}

\newtcbtheorem[number within=chapter]{question}{Question}%
{theo={green!50!black}}{qu}

\newtcbtheorem[number within=chapter]{example}{Example}%
{theo=black,colback=white}{example}

\newtcolorbox{marker}[1][]{marker={yellow!50!white},#1}
\newtcolorbox{important}[1][]{marker=orange,#1}
\newtcolorbox{cnote}[1][]{marker=yellow,#1}
\newtcolorbox{note}[1][]{marker=white,#1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% METADATA
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% remove when using \maketitle:
\renewcommand\and{\\[\baselineskip]}

\title{Advanced Statistical Modeling}
\author{Aleix Bon√©}
\date{Fall 2022}

\makeindex

\begin{document}
\newcommand{\iemph}[1]{\index{#1}\emph{#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TITLE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Default title or use titlepage.tex

%\maketitle
\include{004-coverpage}
\include{005-titlepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TOC & lists
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagenumbering{Roman}

%\setcounter{tocdepth}{2}
\tableofcontents \vfill
\listoffigures \listoftables \clearpage

\pagenumbering{arabic}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SECTIONS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Paragraph spacing (placed after ToC)
\setlength{\parskip}{1em plus 0.5em minus 0.2em}
%\setlength{\parindent}{0pt}

% \selectcolormodel{gray}

\setlength{\headheight}{14.5pt}
\pagestyle{fancy}

% Bayes
\include{010-bayes}
\include{020-bayesian-inference}
\include{030-bayesian-computation}
\include{040-hierarchical-models}
\include{050-model-checking}

% Time series
\include{110-stochastic-processes}
\include{120-arma}

% \nocite{*}

\printindex
\vfill
\printbibliography

\end{document}
